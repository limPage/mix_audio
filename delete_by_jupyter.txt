from pathlib import Path
from pydub import AudioSegment

voice_dir = Path("D:/mix/white_list")
prefixes = ["voice7000", "voice5000", "voice5454", "voice5558"]

for wav_path in voice_dir.glob("*.wav"):
    name = wav_path.stem
    delete_flag = False

    # 001, 002로 끝나거나 특정 prefix로 시작하면 삭제
    if name.endswith("001") or name.endswith("002") or any(name.startswith(prefix) for prefix in prefixes):
        delete_flag = True

    # 길이 10초 초과 파일 삭제
    if not delete_flag:
        try:
            audio = AudioSegment.from_wav(wav_path)
            if len(audio) > 10000:
                delete_flag = True
        except Exception as e:
            print(f"파일 읽기 오류(삭제 안됨): {wav_path.name}, {e}")

    if delete_flag:
        print(f"삭제: {wav_path.name}")
        wav_path.unlink()


from pathlib import Path

voice_dir = Path("D:/mix/white_list")
prefixes = ["voice_902", "voice_906", "voice_907", "voice_908"]
counts = {prefix: 0 for prefix in prefixes}

for wav_path in voice_dir.glob("*.wav"):
    for prefix in prefixes:
        if wav_path.stem.startswith(prefix):
            counts[prefix] += 1

for prefix in prefixes:
    print(f"{prefix}로 시작하는 파일 수: {counts[prefix]}")
